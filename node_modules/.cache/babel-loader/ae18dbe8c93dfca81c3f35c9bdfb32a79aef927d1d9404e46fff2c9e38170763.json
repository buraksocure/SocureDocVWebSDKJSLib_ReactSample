{"ast":null,"code":"var _jsxFileName = \"/Users/burak.kebapci/Desktop/SocureDocVWebSDKJSLib_ReactSample/src/SocureComponent.js\",\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useImperativeHandle, forwardRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SocureComponent = /*#__PURE__*/_s2( /*#__PURE__*/forwardRef(_c = _s2((_ref, ref) => {\n  var _s = $RefreshSig$();\n  _s2();\n  let {\n    step = 1,\n    inputData = {},\n    processConfig = {},\n    sdkKey,\n    onSuccessCallback,\n    onErrorCallback\n  } = _ref;\n  const script = document.createElement('script');\n  script.src = 'https://websdk.socure.com/bundle.js';\n  script.type = 'text/javascript';\n  script.onload = () => {\n    setScriptLoaded(true);\n  };\n  document.head.appendChild(script);\n  _s(useEffect(_s(() => {\n    _s();\n    let sdkInitiated = false;\n    let changesDone = false;\n    const [scriptLoaded, setScriptLoaded] = useState(false);\n    const onProgress = progress => {\n      console.log(progress);\n      console.log('progress');\n    };\n    const onSuccess = response => {\n      console.log(response);\n      console.log('success');\n      if (typeof onSuccessCallback === 'function') {\n        onSuccessCallback(response);\n      }\n    };\n    const onError = error => {\n      console.log(error);\n      console.log('error');\n      if (typeof onErrorCallback === 'function') {\n        onErrorCallback(error);\n      }\n    };\n    const config = {\n      onProgress: onProgress,\n      onSuccess: onSuccess,\n      onError: onError,\n      qrCodeNeeded: true\n    };\n    const clearSession = () => {\n      window.Socure.cleanup();\n      window.Socure.reset();\n      sessionStorage.removeItem('documentVerificationToken');\n      sessionStorage.removeItem('publicApiKey');\n      localStorage.removeItem('devicer_id');\n      console.log('Socure DocV Session cleaned!');\n    };\n    const start = () => {\n      if (!scriptLoaded) {\n        console.error('Socure script not yet loaded');\n        return;\n      }\n      if (sdkInitiated) {\n        clearSession();\n        console.log('cleaned');\n        sdkInitiated = false;\n      }\n      if (!sdkKey) {\n        console.error('SDK key is required');\n        return;\n      }\n      window.SocureInitializer.init(sdkKey).then(lib => {\n        lib.init(sdkKey, '#websdk', config).then(() => {\n          lib.start(step, inputData, processConfig).then(response => {\n            console.log(response);\n            sdkInitiated = true;\n          }, error => {\n            console.log(error);\n          });\n        });\n      });\n    };\n  }, \"tCOeVyXUnEcecJGvOceVboesOmE=\"), []), \"tCOeVyXUnEcecJGvOceVboesOmE=\");\n  useImperativeHandle(ref, () => ({\n    start\n  }));\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"websdk\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}, \"e8kPtwUlMVQCIrvuF5ZZW434xFo=\")), \"e8kPtwUlMVQCIrvuF5ZZW434xFo=\");\n_c2 = SocureComponent;\nexport default SocureComponent;\nvar _c, _c2;\n$RefreshReg$(_c, \"SocureComponent$forwardRef\");\n$RefreshReg$(_c2, \"SocureComponent\");","map":{"version":3,"names":["React","useEffect","useImperativeHandle","forwardRef","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","SocureComponent","_s2","_c","_ref","ref","_s","$RefreshSig$","step","inputData","processConfig","sdkKey","onSuccessCallback","onErrorCallback","script","document","createElement","src","type","onload","setScriptLoaded","head","appendChild","sdkInitiated","changesDone","scriptLoaded","onProgress","progress","console","log","onSuccess","response","onError","error","config","qrCodeNeeded","clearSession","window","Socure","cleanup","reset","sessionStorage","removeItem","localStorage","start","SocureInitializer","init","then","lib","children","id","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["/Users/burak.kebapci/Desktop/SocureDocVWebSDKJSLib_ReactSample/src/SocureComponent.js"],"sourcesContent":["import React, { useEffect, useImperativeHandle, forwardRef, useState } from 'react';\n\nconst SocureComponent = forwardRef(({\n  step = 1,\n  inputData = {},\n  processConfig = {},\n  sdkKey,\n  onSuccessCallback,\n  onErrorCallback,\n}, ref) => {\n\n\n  const script = document.createElement('script');\n  script.src = 'https://websdk.socure.com/bundle.js';\n  script.type = 'text/javascript';\n  script.onload = () => {\n    setScriptLoaded(true);\n  };\n  document.head.appendChild(script);\n\n\n  useEffect(() => {\n\n    let sdkInitiated = false;\n    let changesDone = false;\n\n    const [scriptLoaded, setScriptLoaded] = useState(false);\n\n    const onProgress = (progress) => {\n      console.log(progress);\n      console.log('progress');\n    };\n\n    const onSuccess = (response) => {\n      console.log(response);\n      console.log('success');\n      if (typeof onSuccessCallback === 'function') {\n        onSuccessCallback(response);\n      }\n    };\n\n    const onError = (error) => {\n      console.log(error);\n      console.log('error');\n      if (typeof onErrorCallback === 'function') {\n        onErrorCallback(error);\n      }\n    };\n\n    const config = {\n      onProgress: onProgress,\n      onSuccess: onSuccess,\n      onError: onError,\n      qrCodeNeeded: true,\n    };\n\n    const clearSession = () => {\n      window.Socure.cleanup();\n      window.Socure.reset();\n      sessionStorage.removeItem('documentVerificationToken');\n      sessionStorage.removeItem('publicApiKey');\n      localStorage.removeItem('devicer_id');\n      console.log('Socure DocV Session cleaned!');\n    };\n\n    const start = () => {\n      if (!scriptLoaded) {\n        console.error('Socure script not yet loaded');\n        return;\n      }\n\n      if (sdkInitiated) {\n        clearSession();\n        console.log('cleaned');\n        sdkInitiated = false;\n      }\n\n      if (!sdkKey) {\n        console.error('SDK key is required');\n        return;\n      }\n\n      window.SocureInitializer.init(sdkKey).then((lib) => {\n        lib.init(sdkKey, '#websdk', config).then(() => {\n          lib.start(step, inputData, processConfig).then(\n            (response) => {\n              console.log(response);\n              sdkInitiated = true;\n            },\n            (error) => {\n              console.log(error);\n            }\n          );\n        });\n      });\n    };\n  }, []);\n\n  useImperativeHandle(ref, () => ({\n    start,\n  }));\n\n\n\n  return (\n    <>\n      <div id=\"websdk\"></div>\n    </>\n  );\n});\n\nexport default SocureComponent;\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}